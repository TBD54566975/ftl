// Code generated by FTL. DO NOT EDIT.
package main

import (
	"context"
	"github.com/TBD54566975/ftl/backend/protos/xyz/block/ftl/v1/ftlv1connect"
	"github.com/TBD54566975/ftl/common/plugin"
	"github.com/TBD54566975/ftl/go-runtime/ftl/reflection"
	"github.com/TBD54566975/ftl/go-runtime/server"

	"ftl/another"
	"ftl/other"
)

func main() {
	verbConstructor := server.NewUserVerbServer("other",
		server.HandleCall(other.Echo),
	)
	ctx := context.Background()

	tr := reflection.NewTypeRegistry(
		reflection.WithSumType[another.SecondTypeEnum](
			*new(another.One),
			*new(another.Two),
		),
		reflection.WithSumType[another.TypeEnum](
			*new(another.A),
			*new(another.B),
		),
		reflection.WithSumType[other.SecondTypeEnum](
			*new(other.A),
			*new(other.B),
		),
		reflection.WithSumType[other.TypeEnum](
			*new(other.MyBool),
			*new(other.MyBytes),
			*new(other.MyFloat),
			*new(other.MyInt),
			*new(other.MyTime),
			*new(other.MyList),
			*new(other.MyMap),
			*new(other.MyString),
			*new(other.MyStruct),
			*new(other.MyOption),
			*new(other.MyUnit),
		),
	)
	ctx = reflection.ContextWithTypeRegistry(ctx, tr)

	plugin.Start(ctx, "other", verbConstructor, ftlv1connect.VerbServiceName, ftlv1connect.NewVerbServiceHandler)
}
