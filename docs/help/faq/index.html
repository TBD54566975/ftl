<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="preload" as="font" href="https://block.github.io/ftl/fonts/vendor/jost/jost-v4-latin-regular.woff2" type="font/woff2" crossorigin>
  <link rel="preload" as="font" href="https://block.github.io/ftl/fonts/vendor/jost/jost-v4-latin-700.woff2"  type="font/woff2" crossorigin>


<link rel="stylesheet" href="https://block.github.io/ftl/main.css">



  
  
    
  

  
  
    
    
  
  
  
    
  
  
  
  
    
  
  
  


  <meta name="robots" content="index, follow">
  <meta name="googlebot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
  <meta name="bingbot" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">


	


	

<title>FAQ | FTL</title>
<meta name="description" content="Answers to frequently asked questions.">
<link rel="canonical" href="https://block.github.io/ftl/docs/help/faq/">










<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BreadcrumbList",
    
      
      
        
        
        
        
        
        
        
        
          {
            "@type": "ListItem",
            "position":  1 ,
            "name": "Home",
            "item": "https://block.github.io/ftl/"
          },
          
          
          {
            "@type": "ListItem",
            "position":  2 ,
            "name": "Docs",
            "item": "https://block.github.io/ftl/docs/"
          },
        
      
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  3 ,
            "name": "Help",
            "item": "https://block.github.io/ftl/docs/help/"
          },
        
      
        
        
        
        
        
        
        
        
          
          
          {
            "@type": "ListItem",
            "position":  4 ,
            "name": "Faq",
            "item": "https://block.github.io/ftl/docs/help/faq/"
          },
        
      
    
  }
</script>






  <meta name="theme-color" content="#fff">
  <link rel="apple-touch-icon" sizes="180x180" href="https://block.github.io/ftl/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://block.github.io/ftl/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://block.github.io/ftl/favicon-16x16.png">
  
    <link rel="manifest" href="https://block.github.io/ftl/site.webmanifest" crossorigin>
  


  

</head>

  

<body class="docs single">
  
  
  
  
<div class="header-bar fixed-top"></div>
<header class="navbar fixed-top navbar-expand-md navbar-light">
	<div class="container">
		<input class="menu-btn order-0" type="checkbox" id="menu-btn">
		<label class="menu-icon d-md-none" for="menu-btn"><span class="navicon"></span></label>
		<a class="navbar-brand order-1 order-md-0 me-auto" href="https://block.github.io/ftl/">FTL</a>
		<button id="mode" class="btn btn-link order-2 order-md-4" type="button" aria-label="Toggle mode">
			<span class="toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></span>
			<span class="toggle-light"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
		</button>
		<ul class="navbar-nav fork-me order-3 order-md-5">
			
				
					<li class="nav-item">
						<a class="nav-link" href="https://twitter.com/blocks"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg><span class="ms-2 visually-hidden">Twitter</span></a>
					</li>
				
					<li class="nav-item">
						<a class="nav-link" href="https://github.com/block/ftl"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg><span class="ms-2 visually-hidden">GitHub</span></a>
					</li>
				
			
		</ul>
		<div class="collapse navbar-collapse order-4 order-md-1">
			<ul class="navbar-nav main-nav me-auto order-5 order-md-2">
				
					
				
				
				
					
						<li class="nav-item docs active">
							<a class="nav-link" href="https://block.github.io/ftl/docs/getting-started/introduction/">Docs</a>
						</li>
					
				
			</ul>
			<div class="break order-6 d-md-none"></div>
			
				<form class="navbar-form flex-grow-1 order-7 order-md-3">
					<input id="userinput" class="form-control is-search" type="search" placeholder="Search docs..."
						aria-label="Search docs..." autocomplete="off">
					<div id="suggestions" class="shadow bg-white rounded"></div>
				</form>
			
		</div>
	</div>
</header>



  
<div class="wrap container" role="document">
  <div class="content">
    <div class="row flex-xl-nowrap">
	  
<div class="col-lg-5 col-xl-4 docs-sidebar">
	<nav class="docs-links" aria-label="Main navigation">
			
			
			
			
					
					
					
							<h3>Getting Started</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/getting-started/introduction/">Introduction</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/getting-started/quick-start/">Quick Start</a></li>
							
					</ul>
					
					
					
					
							<h3>Reference</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/start/">Start</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/verbs/">Verbs</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/types/">Types</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/visibility/">Visibility</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/ingress/">HTTP Ingress</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/cron/">Cron</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/secretsconfig/">Secrets&#x2F;Config</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/pubsub/">PubSub</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/retries/">Retries</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/externaltypes/">External Types</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/unittests/">Unit Tests</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/reference/matrix/">Feature Matrix</a></li>
							
					</ul>
					
					
					
					
							<h3>Help</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link active" href="https://block.github.io/ftl/docs/help/faq/">FAQ</a></li>
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/help/glossary/">Glossary</a></li>
							
					</ul>
					
					
					
					
							<h3>Observability</h3>
							<ul class="list-unstyled">
							                           
									<li><a class="docs-link" href="https://block.github.io/ftl/docs/observability/metrics/">Metrics</a></li>
							
					</ul>
					
					
			
	</nav>
</div>

	  
  
  <nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation">
  	<div class="page-links">
  			<h3>On this page</h3>
  			<nav id="TableOfContents">
  					<ul>
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#why-does-ftl-not-allow-external-types-directly">Why does FTL not allow external types directly?</a></li>
  							
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#what-is-a-module">What is a &quot;module&quot;?</a></li>
  							
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#how-do-i-represent-optional-nullable-values">How do I represent optional&#x2F;nullable values?</a></li>
  							
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#why-must-requests-responses-be-data-structures-can-t-they-be-arrays-etc">Why must requests&#x2F;responses be data structures, can&#x27;t they be arrays, etc.?</a></li>
  							
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#i-can-t-export-a-verb-from-a-nested-package-inside-a-subdirectory-of-the-module-root-what-do-i-do">I can&#x27;t export a Verb from a nested package inside a subdirectory of the module root. What do I do?</a></li>
  							
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#what-types-are-supported-by-ftl">What types are supported by FTL?</a></li>
  							
  							
  							<li><a href="https://block.github.io/ftl/docs/help/faq/#sql-errors-on-startup">SQL errors on startup?</a></li>
  							
  							
  					</ul>
  			</nav>
  	</div>
  </nav>
  

      <main class="docs-content col-lg-11 col-xl-9">
        <h1>FAQ</h1>
        <p class="lead">Answers to frequently asked questions.</p>
        <h2 id="why-does-ftl-not-allow-external-types-directly">Why does FTL not allow external types directly?</h2>
<p>Because of the nature of writing FTL verbs and data types, it's easy to think of it as just writing standard native code. Through that lens it is then somewhat surprising when FTL disallows the use of arbitrary external data types.</p>
<p>However, FTL types are not <em>just</em> native types. FTL types are a more convenient method of writing an IDL such as <a href="https://protobuf.dev/">Protobufs</a>, <a href="https://www.openapis.org/">OpenAPI</a> or <a href="https://thrift.apache.org/">Thrift</a>. With this in mind the constraint makes more sense. An IDL by its very nature must support a multitude of languages, so including an arbitrary type from a third party native library in one language may not be translatable to another language.</p>
<p>There are also secondary reasons, such as:</p>
<ul>
<li>Unclear ownership - in FTL a type must be owned by a single module. When importing a common third party type from multiple modules, which module owns that type?</li>
<li>An external type must be representable in the FTL schema. The schema is then used to generate types for other modules, including those in other languages. For an external type, FTL could track the external library it belongs to to generate the "correct" code, but this would only be representable in a single language.</li>
<li>External types often perform custom marshalling to/from JSON. This is not representable cross-language.</li>
<li>Cleaner separation of abstraction layers - the ability to mix in abitrary external types is convenient, but can easily lead to mixing of concerns between internal and external data representations.</li>
</ul>
<p>So what to do? See the <a href="https://block.github.io/ftl/docs/reference/externaltypes/">external types</a> documentation
for how to work around this limitation.</p>
<h2 id="what-is-a-module">What is a "module"?</h2>
<p>In its least abstract form, a module is a collection of verbs, and the resources (databases, queues, cron jobs, secrets, config, etc.) that those verbs rely on to operate. All resources are private to their owning module.</p>
<p>More abstractly, the separation of concerns between modules is largely subjective. You <em>can</em> think of each module as largely analogous to a traditional service, so when asking where the division between modules is that could inform your decision. That said, the ease of deploying modules in FTL is designed to give you more flexibility in how you structure your code.</p>
<h2 id="how-do-i-represent-optional-nullable-values">How do I represent optional/nullable values?</h2>
<p>FTL's type system includes support for optionals. In Go this is represented as <code>ftl.Option[T]</code>, in languages with first-class support for optionals such as Kotlin, FTL will leverage the native type system.</p>
<p>When FTL is mapping to JSON, optional values will be represented as <code>null</code>.</p>
<p>In Go specifically, pointers to values are not supported because pointers are semantically ambiguous and error prone. They can mean, variously: "this value may or may not be present", or "this value just happens to be a pointer", or "this value is a pointer because it's mutable"</p>
<p>Additionally pointers to builtin types are painful to use in Go because you can't obtain a reference to a literal.</p>
<h2 id="why-must-requests-responses-be-data-structures-can-t-they-be-arrays-etc">Why must requests/responses be data structures, can't they be arrays, etc.?</h2>
<p>This is currently due to FTL relying on traditional <a href="https://softwaremill.com/schema-evolution-protobuf-scalapb-fs2grpc/">schema evolution</a> for forwards/backwards compatibility - eg. changing a slice to a struct in a backward compatible way is not possible, as an existing deployed peer consuming the slice will fail if it suddenly changes to a data structure.</p>
<p>Eventually FTL will allow multiple versions of a verb to be simultaneously deployed, such that a version returning a slice can coexist temporarily with a version returning a struct. Once all peers have been updated to support the new type signature, the old version will be dropped.</p>
<h2 id="i-can-t-export-a-verb-from-a-nested-package-inside-a-subdirectory-of-the-module-root-what-do-i-do">I can't export a Verb from a nested package inside a subdirectory of the module root. What do I do?</h2>
<p>Verbs and types can only be exported from the top level of each module. You are welcome to put any helper code you'd like in a nested package/directory.</p>
<h2 id="what-types-are-supported-by-ftl">What types are supported by FTL?</h2>
<p>FTL supports the following types: <code>Int</code> (64-bit), <code>Float</code> (64-bit), <code>String</code>, <code>Bytes</code> (a byte array), <code>Bool</code>, <code>Time</code>, <code>Any</code> (a dynamic type), <code>Unit</code> (similar to "void"), arrays, maps, data structures, and constant enumerations. Each FTL type is mapped to a corresponding language-specific type. For example in Go <code>Float</code> is represented as <code>float64</code>, <code>Time</code> is represented by <code>time.Time</code>, and so on.</p>
<p>Note that currently (until <a href="https://github.com/block/ftl/issues/1296">type widening</a> is implemented), external types are not supported.</p>
<h2 id="sql-errors-on-startup">SQL errors on startup?</h2>
<p>For example:</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#65737e;"># ftl dev                                                                                            ~/src/ftl
</span><span style="color:#bf616a;">info:</span><span> Starting FTL with 1 controller(s)
</span><span style="color:#bf616a;">ftl:</span><span> error: ERROR: relation &quot;</span><span style="color:#a3be8c;">fsm_executions</span><span>&quot; does not exist (SQLSTATE 42P01)
</span></code></pre>
<p>Run again with <code>ftl dev</code>. This usually indicates that your DB has an old schema.</p>
<p>This can occur when FTL has been upgraded with schema changes, making the database out of date. While in alpha we do not use schema migrations, so this won't occur once we hit a stable release.</p>

        
        
<div class="docs-navigation d-flex justify-content-between">
  
  
  
  
  
    
    
    
    
      
        
        
          
        
      
        
        
          
        
      
        
        
          
            
              
              <a href="https:&#x2F;&#x2F;block.github.io&#x2F;ftl&#x2F;docs&#x2F;reference&#x2F;matrix&#x2F;">
                <div class="card my-1">
                  <div class="card-body py-2">
                    &larr; Feature Matrix
                  </div>
                </div>
              </a>
            
            
            
          
        
      
        
        
          
        
      
    
  

  
  
  
  
  
    
    
    
      
      
        
      
    
      
      
        
      
    
      
      
        
      
    
      
      
        
          
          
          <a class="ms-auto" href="https:&#x2F;&#x2F;block.github.io&#x2F;ftl&#x2F;docs&#x2F;observability&#x2F;metrics&#x2F;">
            <div class="card my-1">
              <div class="card-body py-2">
                Metrics &rarr;
              </div>
            </div>
          </a>
          
          
          
        
      
    
  
</div>

      </main>
    </div>
  </div>
</div>


  

    
<footer class="footer text-muted">
	<div class="container">
		<div class="row">
			<div class="col-lg-8 order-last order-lg-first">
				<ul class="list-inline">
					
						<li class="list-inline-item">Powered by <a href="https://www.getzola.org/">Zola</a>, and <a href="https://github.com/aaranxu/adidoks">AdiDoks</a></li>
					
				</ul>
			</div>
			<div class="col-lg-8 order-first order-lg-last text-lg-end">
				<ul class="list-inline">
					
				</ul>
			</div>
		</div>
	</div>
</footer>

  
<script src="https://block.github.io/ftl/js/code-selector.js" defer>
</script>


  
<script type="text/javascript" src="https://block.github.io/ftl/js/main.js" defer></script>

  <script type="text/javascript" src="https://block.github.io/ftl/plugins/elasticlunr.min.js" defer></script>
  <script type="text/javascript" src="https://block.github.io/ftl/search_index.en.js" defer></script>
  <script type="text/javascript" src="https://block.github.io/ftl/js/search.js" defer></script>

  
</body>
</html>
