+++
title = "Verbs"
description = "Declaring and calling Verbs"
date = 2021-05-01T08:20:00+00:00
updated = 2021-05-01T08:20:00+00:00
draft = false
weight = 20
sort_by = "weight"
template = "docs/page.html"

[extra]
toc = true
top = false
+++

## Defining Verbs

{% code_selector() %}

<!-- go -->
To declare a Verb, write a normal Go function with the following signature, annotated with the Go [comment directive](https://tip.golang.org/doc/comment#syntax) `//ftl:verb`:

```go
//ftl:verb
func F(context.Context, In) (Out, error) { }
```

eg.

```go
type EchoRequest struct {}

type EchoResponse struct {}

//ftl:verb
func Echo(ctx context.Context, in EchoRequest) (EchoResponse, error) {
  // ...
}
```

<!-- kotlin -->
To declare a Verb, write a normal Kotlin function with the following signature, annotated with the Kotlin [annotation](https://kotlinlang.org/docs/annotations.html) `@Verb`:

```kotlin
@Verb
fun F(Context, In): Out { }
```

eg.

```kotlin
data class EchoRequest
data class EchoResponse

@Verb
fun echo(request: EchoRequest): EchoResponse {
  // ...
}
```

{% end %}

By default verbs are only [visible](../visibility) to other verbs in the same module.

## Calling Verbs

{% code_selector() %}

<!-- go -->
To call a verb, import the module's verb client (`{ModuleName}.{VerbName}Client`), add it to your verb's signature, then invoke it as a function. eg.

```go
//ftl:verb
func Echo(ctx context.Context, in EchoRequest, tc time.TimeClient) (EchoResponse, error) {
	out, err := tc(ctx, TimeRequest{...})
}
```

Verb clients are generated by FTL. If the callee verb belongs to the same module as the caller, you must build the 
module first (with callee verb defined) in order to generate its client for use by the caller. Local verb clients are 
available in the generated `types.ftl.go` file as `{VerbName}Client`.

<!-- kotlin -->
To call a verb, import the module's verb client, add it to your verb's signature, then `call()` it. eg.

```kotlin
import ftl.time.TimeClient

@Verb
fun echo(req: EchoRequest, time: TimeClient): EchoResponse {
  val response = time.call()
  // ...
}

val response = time.call()
```

{% end %}
